# s21::map - –ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä "–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ"

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ](#–∫–æ–Ω—Ü–µ–ø—Ü–∏—è-–∏-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)
3. [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-–∏-–æ—Å–Ω–æ–≤–Ω—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏)
4. [–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π](#–¥–µ—Ç–∞–ª—å–Ω—ã–π-—Ä–∞–∑–±–æ—Ä-—Ñ—É–Ω–∫—Ü–∏–π)
5. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–∏–º–µ—Ä—ã)
6. [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Å-–¥—Ä—É–≥–∏–º–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏)
7. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**s21::map** ‚Äî —ç—Ç–æ **–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –≤–∏–¥–µ –ø–∞—Ä "–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ" (`std::pair<const Key, T>`). –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:

### –ö–ª—é—á–µ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:
‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏** ‚Äî –∫–∞–∂–¥—ã–π –∫–ª—é—á –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** ‚Äî —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –∫–ª—é—á–∞–º  
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø** ‚Äî O(log n) –¥–ª—è –ø–æ–∏—Å–∫–∞, –≤—Å—Ç–∞–≤–∫–∏, —É–¥–∞–ª–µ–Ω–∏—è  
‚úÖ **–î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `++` –∏ `--`  

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å map:
üîç **–ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á—É** ‚Äî –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º  
üìä **–°–ª–æ–≤–∞—Ä–∏ –∏ –∏–Ω–¥–µ–∫—Å—ã** ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥–∏–º  
üìà **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π  
üóÇÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** ‚Äî –ø–∞—Ä—ã "–ø–∞—Ä–∞–º–µ—Ç—Ä-–∑–Ω–∞—á–µ–Ω–∏–µ"  

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
```cpp
s21::map<std::string, int> word_count;        // –ü–æ–¥—Å—á–µ—Ç —á–∞—Å—Ç–æ—Ç—ã —Å–ª–æ–≤
s21::map<int, std::string> id_to_name;        // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ID ‚Üí –∏–º—è  
s21::map<std::string, double> stock_prices;   // –¶–µ–Ω—ã –∞–∫—Ü–∏–π –ø–æ —Ç–∏–∫–µ—Ä—É
s21::map<char, int> char_frequency;           // –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

### –û—Å–Ω–æ–≤–∞: –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ

Map –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±–∞–∑–µ **–∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞**, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: O(log n) –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –≤—ã—Å–æ—Ç–∞ –¥–µ—Ä–µ–≤–∞ ‚â§ 2 log n
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –º–µ–Ω—å—à–µ –≤—Ä–∞—â–µ–Ω–∏–π –ø—Ä–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ–º –≤ AVL

```cpp
template <typename Key, typename T, typename Compare = std::less<Key>>
class map {
private:
    using tree_type = RedBlackTree<Key, value_type, KeyOfValue, Compare>;
    tree_type tree_;  // –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –¥–µ—Ä–µ–≤–æ
};
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            s21::map                 ‚îÇ  ‚Üê –ü—É–±–ª–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ        KeyOfValue —Ñ—É–Ω–∫—Ç–æ—Ä           ‚îÇ  ‚Üê –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –∏–∑ pair
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ     RedBlackTree<Key, pair>         ‚îÇ  ‚Üê –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ         –£–∑–ª—ã –¥–µ—Ä–µ–≤–∞ —Å –ø–∞—Ä–∞–º–∏        ‚îÇ  ‚Üê –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:

```cpp
// –ö–∞–∂–¥—ã–π —É–∑–µ–ª –¥–µ—Ä–µ–≤–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
struct Node {
    std::pair<const Key, T> data;  // –ü–∞—Ä–∞ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
    Node* parent;                  // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —É–∑–µ–ª  
    Node* left, *right;           // –î–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã
    Color color;                  // –ö—Ä–∞—Å–Ω—ã–π –∏–ª–∏ —á–µ—Ä–Ω—ã–π
};
```

### KeyOfValue —Ñ—É–Ω–∫—Ç–æ—Ä:

```cpp
struct KeyOfValue {
    const Key& operator()(const value_type& value) const {
        return value.first;  // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á –∏–∑ –ø–∞—Ä—ã
    }
};
```

–≠—Ç–æ—Ç —Ñ—É–Ω–∫—Ç–æ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–º—É –¥–µ—Ä–µ–≤—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞—Ä–∞–º–∏, –∏–∑–≤–ª–µ–∫–∞—è –∫–ª—é—á –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

---

## üîß –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:

```cpp
using key_type = Key;                           // –¢–∏–ø –∫–ª—é—á–∞
using mapped_type = T;                          // –¢–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è  
using value_type = std::pair<const Key, T>;     // –¢–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞
using reference = value_type&;                  // –°—Å—ã–ª–∫–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
using const_reference = const value_type&;      // –ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞
using size_type = size_t;                       // –¢–∏–ø —Ä–∞–∑–º–µ—Ä–∞
using key_compare = Compare;                    // –¢–∏–ø –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞
```

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã:

```cpp
map();                                          // –ü—É—Å—Ç–æ–π map
explicit map(const Compare& comp);              // –° –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º
map(std::initializer_list<value_type> items);   // –ò–∑ —Å–ø–∏—Å–∫–∞
map(const map& other);                          // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
map(map&& other) noexcept;                      // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–µ—Ä–∞—Ü–∏–∏ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-----------|----------|-----------|
| **–î–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º** | `at()`, `operator[]` | O(log n) |
| **–ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã** | `begin()`, `end()` | O(1) |
| **–†–∞–∑–º–µ—Ä** | `empty()`, `size()`, `max_size()` | O(1) |
| **–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è** | `insert()`, `erase()`, `clear()` | O(log n) |
| **–ü–æ–∏—Å–∫** | `find()`, `contains()` | O(log n) |

---

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ C++ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Template –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

```cpp
template <typename Key, typename T, typename Compare = std::less<Key>>
class map {
    // KeyOfValue —Ñ—É–Ω–∫—Ç–æ—Ä –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–∞ –∏–∑ std::pair
    struct KeyOfValue {
        const Key& operator()(const value_type& value) const {
            return value.first;  // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á –∏–∑ –ø–∞—Ä—ã
        }
    };
    
    // Alias –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –¥–µ—Ä–µ–≤–∞
    using tree_type = RedBlackTree<Key, value_type, KeyOfValue, Compare>;
};
```

**–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

1. **Template –ø–∞—Ä–∞–º–µ—Ç—Ä Compare**: –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
```cpp
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏–π)
s21::map<int, std::string> standard_map;

// –£–±—ã–≤–∞—é—â–∏–π –ø–æ—Ä—è–¥–æ–∫  
s21::map<int, std::string, std::greater<int>> reverse_map;

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä
struct CustomCompare {
    bool operator()(const std::string& a, const std::string& b) const {
        return a.length() < b.length();  // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–ª–∏–Ω–µ —Å—Ç—Ä–æ–∫–∏
    }
};
s21::map<std::string, int, CustomCompare> length_sorted_map;
```

2. **KeyOfValue —Ñ—É–Ω–∫—Ç–æ—Ä**: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ä–∞–º–∏
```cpp
// –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ—Ä–µ–≤—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å std::pair<const Key, T>,
// –Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á–∞–º (Key)
const Key& key = key_of_value_(node->data);  // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á –∏–∑ –ø–∞—Ä—ã
```

### Memory layout –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```cpp
// –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞ –≤ –ø–∞–º—è—Ç–∏ (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ):
sizeof(Node<std::pair<int, std::string>>) = 
    sizeof(std::pair<const int, std::string>) +  // –î–∞–Ω–Ω—ã–µ: ~32 –±–∞–π—Ç–∞
    3 * sizeof(void*) +                          // –£–∫–∞–∑–∞—Ç–µ–ª–∏: 24 –±–∞–π—Ç–∞  
    sizeof(Color) +                              // –¶–≤–µ—Ç: 1 –±–∞–π—Ç
    padding;                                     // –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ: ~7 –±–∞–π—Ç
// –ò—Ç–æ–≥–æ: ~64 –±–∞–π—Ç–∞ –Ω–∞ —É–∑–µ–ª
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞:**
- **Empty Base Optimization (EBO)** –¥–ª—è —Ñ—É–Ω–∫—Ç–æ—Ä–æ–≤ –±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Template instantiation** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- **Inlining** –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∫–∞–∫ `empty()`, `size()`

### Perfect Forwarding –∏ Modern C++

```cpp
// insert_many –∏—Å–ø–æ–ª—å–∑—É–µ—Ç perfect forwarding
template <typename... Args>
s21::vector<std::pair<iterator, bool>> insert_many(Args&&... args) {
    return tree_.insert_many(std::forward<Args>(args)...);
    //                      ^^^^^^^^^^^^^^^^^^^^^^^^^
    //                      Perfect forwarding —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç
    //                      value category –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
map.insert_many(
    std::make_pair(1, "one"),           // lvalue
    std::pair<int, std::string>(2, "two"), // rvalue
    {3, "three"}                        // braced initialization
);
```

### Exception Safety –≥–∞—Ä–∞–Ω—Ç–∏–∏

```cpp
// Strong exception safety –≤ operator[]
T& operator[](const Key& key) {
    // –ï—Å–ª–∏ T() –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —Å–æ—Å—Ç–æ—è–Ω–∏–µ map –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è
    auto result = tree_.insert(std::make_pair(key, T()));
    return result.first->second;
}

// Basic exception safety –≤ merge()
void merge(map& other) {
    for (auto it = other.begin(); it != other.end();) {
        auto result = tree_.insert(*it);
        if (result.second) {
            // –£–¥–∞–ª—è–µ–º –∏–∑ other —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏
            auto to_erase = it++;
            other.tree_.erase(to_erase);
        } else {
            ++it;
        }
    }
    // –ï—Å–ª–∏ –≤—Å—Ç–∞–≤–∫–∞ –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, other –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –≤–∞–ª–∏–¥–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
}
```

### Move Semantics –∏ RAII

```cpp
// Move –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä - O(1) –æ–ø–µ—Ä–∞—Ü–∏—è
map(map&& other) noexcept : tree_(std::move(other.tree_)) {}

// Move assignment —Å self-assignment –∑–∞—â–∏—Ç–æ–π
map& operator=(map&& other) noexcept {
    if (this != &other) {
        tree_ = std::move(other.tree_);  // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    }
    return *this;
}

// RAII - –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç ~tree_type()
~map() = default;  // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä
```

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π

### üèóÔ∏è –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```cpp
map() : tree_() {}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –ø—É—Å—Ç–æ–π map —Å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(1)  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å —Å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º
```cpp  
explicit map(const Compare& comp) : tree_(comp) {}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –ø—É—Å—Ç–æ–π map —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º.  
**–ü—Ä–∏–º–µ—Ä**:
```cpp
// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ —É–±—ã–≤–∞—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ
s21::map<int, std::string, std::greater<int>> reverse_map;
```

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```cpp
map(std::initializer_list<value_type> const &items) : tree_() {
    for (const auto& item : items) {
        tree_.insert(item);
    }
}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç map –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–∞—Ä.  
**–ü—Ä–∏–º–µ—Ä**:
```cpp
s21::map<std::string, int> scores = {
    {"Alice", 95}, 
    {"Bob", 87}, 
    {"Carol", 92}
};
```

### üîê –î–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º

#### at() - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø
```cpp
T& at(const Key& key) {
    auto it = tree_.find(key);
    if (it == tree_.end()) {
        throw std::out_of_range("map::at: key not found");
    }
    return it->second;
}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è.  
**–ò—Å–∫–ª—é—á–µ–Ω–∏—è**: `std::out_of_range` –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω.  
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ö–æ–≥–¥–∞ –≤–∞–∂–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.

#### operator[] - –¥–æ—Å—Ç—É–ø —Å –∞–≤—Ç–æ–≤—Å—Ç–∞–≤–∫–æ–π
```cpp
T& operator[](const Key& key) {
    auto result = tree_.insert(std::make_pair(key, T()));
    return result.first->second;
}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–≤–∞—è —ç–ª–µ–º–µ–Ω—Ç –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç.  
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å default-–∑–Ω–∞—á–µ–Ω–∏–µ–º.  
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ at() vs operator[]:**

```cpp
s21::map<std::string, int> m;

// operator[] - —Å–æ–∑–¥–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
m["new_key"] = 42;  // OK: —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–∞—Ä–∞ {"new_key", 0}, –ø–æ—Ç–æ–º –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è 42

// at() - –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ—Ç  
try {
    int value = m.at("missing_key");  // –ò—Å–∫–ª—é—á–µ–Ω–∏–µ!
} catch (const std::out_of_range& e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
}
```

### üîÑ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è

#### insert() - –≤—Å—Ç–∞–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```cpp
std::pair<iterator, bool> insert(const value_type& value) {
    return tree_.insert(value);
}
```
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –ü–∞—Ä—É –∏–∑ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –∏ —Ñ–ª–∞–≥–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏.  
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –í—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª—é—á —É–Ω–∏–∫–∞–ª–µ–Ω.

**–í–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```cpp
s21::map<int, std::string> m;

// –í–∞—Ä–∏–∞–Ω—Ç 1: insert(pair)  
auto result1 = m.insert({1, "one"});
if (result1.second) {
    std::cout << "Inserted successfully\n";
}

// –í–∞—Ä–∏–∞–Ω—Ç 2: insert(key, value)
auto result2 = m.insert(2, "two");

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
auto [iter, inserted] = m.insert({1, "ONE"}); // C++17
if (!inserted) {
    std::cout << "Key already exists: " << iter->second << '\n';
}
```

#### insert_or_assign() - –≤—Å—Ç–∞–≤–∫–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```cpp
std::pair<iterator, bool> insert_or_assign(const Key& key, const T& obj) {
    auto result = tree_.insert(std::make_pair(key, obj));
    if (!result.second) {
        result.first->second = obj;  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    }
    return result;
}
```
**–û—Ç–ª–∏—á–∏–µ –æ—Ç insert()**: –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å–ª–∏ –∫–ª—é—á —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `true` –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, `false` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.

#### erase() - —É–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤  
```cpp
void erase(iterator pos) {
    tree_.erase(pos);
}
```
**–í–∞—Ä–∏–∞–Ω—Ç—ã —É–¥–∞–ª–µ–Ω–∏—è**:
```cpp  
s21::map<int, std::string> m = {{1, "one"}, {2, "two"}, {3, "three"}};

// –ü–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—É
auto it = m.find(2);
if (it != m.end()) {
    m.erase(it);
}

// –ü–æ –∫–ª—é—á—É (–µ—Å–ª–∏ –±—ã–ª–∞ –±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)  
// size_t count = m.erase(1);  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö (0 –∏–ª–∏ 1)
```

#### merge() - —Å–ª–∏—è–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º map
```cpp
void merge(map& other) {
    for (auto it = other.begin(); it != other.end();) {
        auto result = tree_.insert(*it);
        if (result.second) {
            auto to_erase = it++;
            other.tree_.erase(to_erase);  // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç  
        } else {
            ++it;  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç
        }
    }
}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –¥—Ä—É–≥–æ–≥–æ map.  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(N log(size() + N)), –≥–¥–µ N = other.size().

### üîç –ü–æ–∏—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

#### find() - –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞
```cpp
iterator find(const Key& key) {
    return tree_.find(key);
}

const_iterator find(const Key& key) const {
    return tree_.find(key);
}
```
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –ò—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –∏–ª–∏ `end()` –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω.  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```cpp
auto it = m.find("key");
if (it != m.end()) {
    std::cout << "Found: " << it->second << '\n';
} else {
    std::cout << "Not found\n";
}
```

#### contains() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞  
```cpp
bool contains(const Key& key) const {
    return tree_.contains(key);
}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–¥–æ–±–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.  
**–°++20 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ê–Ω–∞–ª–æ–≥ `std::map::contains()`.

```cpp
if (m.contains("key")) {
    // –≠–ª–µ–º–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    auto value = m["key"];  // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø
}
```

### ‚ûï –ë–æ–Ω—É—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### insert_many() - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞
```cpp
template <typename... Args>
s21::vector<std::pair<iterator, bool>> insert_many(Args&&... args) {
    return tree_.insert_many(std::forward<Args>(args)...);
}
```
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤.  
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç**: Perfect forwarding –∏ variadic templates.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```cpp
auto results = m.insert_many(
    std::make_pair(1, "one"),
    std::make_pair(2, "two"), 
    std::make_pair(3, "three")
);

for (const auto& [iter, inserted] : results) {
    if (inserted) {
        std::cout << "Inserted: " << iter->first << " -> " << iter->second << '\n';
    }
}
```

---

## üìñ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–¥—Å—á–µ—Ç —á–∞—Å—Ç–æ—Ç—ã —Å–ª–æ–≤

```cpp
#include "s21_containers.h" 
#include <iostream>
#include <sstream>

void count_words(const std::string& text) {
    s21::map<std::string, int> word_count;
    std::istringstream iss(text);
    std::string word;
    
    // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–ª–æ–≤–∞
    while (iss >> word) {
        word_count[word]++;  // operator[] —Å–æ–∑–¥–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –µ—Å–ª–∏ –Ω–µ—Ç
    }
    
    // –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π!)
    for (const auto& [word, count] : word_count) {
        std::cout << word << ": " << count << '\n';
    }
}

// –í—ã–∑–æ–≤:
count_words("hello world hello cpp world hello");

// –í—ã–≤–æ–¥:
// cpp: 1
// hello: 3  
// world: 2
```

### –ü—Ä–∏–º–µ—Ä 2: –ö—ç—à –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (–º–µ–º–æ–∏–∑–∞—Ü–∏—è)

```cpp
class FibonacciCalculator {
private:
    mutable s21::map<int, long long> cache_;
    
public:
    long long fibonacci(int n) const {
        if (n <= 1) return n;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
        auto it = cache_.find(n);
        if (it != cache_.end()) {
            return it->second;  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        }
        
        // –í—ã—á–∏—Å–ª—è–µ–º –∏ –∫—ç—à–∏—Ä—É–µ–º
        long long result = fibonacci(n-1) + fibonacci(n-2);
        cache_[n] = result;  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
        
        return result;
    }
    
    void print_cache() const {
        for (const auto& [n, fib] : cache_) {
            std::cout << "fib(" << n << ") = " << fib << '\n';
        }
    }
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
FibonacciCalculator calc;
std::cout << "fib(10) = " << calc.fibonacci(10) << '\n';
calc.print_cache();  // –£–≤–∏–¥–∏–º –≤—Å–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
```

### –ü—Ä–∏–º–µ—Ä 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```cpp
class ConfigManager {
private:
    s21::map<std::string, std::string> settings_;
    
public:
    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    ConfigManager() : settings_{
        {"host", "localhost"},
        {"port", "8080"}, 
        {"timeout", "30"},
        {"debug", "false"}
    } {}
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    std::string get(const std::string& key, const std::string& default_value = "") const {
        auto it = settings_.find(key);
        return (it != settings_.end()) ? it->second : default_value;
    }
    
    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    void set(const std::string& key, const std::string& value) {
        settings_[key] = value;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    bool has_setting(const std::string& key) const {
        return settings_.contains(key);
    }
    
    // –°–ª–∏—è–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
    void merge_settings(ConfigManager& other) {
        settings_.merge(other.settings_);
    }
    
    // –í—ã–≤–æ–¥ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    void print_all() const {
        for (const auto& [key, value] : settings_) {
            std::cout << key << " = " << value << '\n';
        }
    }
};
```

### –ü—Ä–∏–º–µ—Ä 4: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

```cpp
struct Student {
    std::string name;
    int age;
    double gpa;
    
    Student() = default;  // –î–ª—è operator[]
    Student(const std::string& n, int a, double g) : name(n), age(a), gpa(g) {}
};

class StudentDatabase {
private:
    s21::map<int, Student> students_;  // ID -> Student
    
public:
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞
    bool add_student(int id, const std::string& name, int age, double gpa) {
        auto result = students_.insert(id, Student(name, age, gpa));
        return result.second;  // true –µ—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω, false –µ—Å–ª–∏ ID –∑–∞–Ω—è—Ç
    }
    
    // –ü–æ–∏—Å–∫ —Å—Ç—É–¥–µ–Ω—Ç–∞  
    const Student* find_student(int id) const {
        auto it = students_.find(id);
        return (it != students_.end()) ? &it->second : nullptr;
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GPA
    bool update_gpa(int id, double new_gpa) {
        auto it = students_.find(id);
        if (it != students_.end()) {
            it->second.gpa = new_gpa;
            return true;
        }
        return false;
    }
    
    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    void print_statistics() const {
        if (students_.empty()) {
            std::cout << "No students in database\n";
            return;
        }
        
        double sum_gpa = 0.0;
        for (const auto& [id, student] : students_) {
            sum_gpa += student.gpa;
        }
        
        std::cout << "Total students: " << students_.size() << '\n';
        std::cout << "Average GPA: " << sum_gpa / students_.size() << '\n';
    }
    
    // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ ID)
    void print_all_students() const {
        for (const auto& [id, student] : students_) {
            std::cout << "ID: " << id << ", Name: " << student.name 
                     << ", Age: " << student.age << ", GPA: " << student.gpa << '\n';
        }
    }
};
```

---

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### map vs unordered_map

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | s21::map | std::unordered_map |
|----------------|----------|-------------------|
| **–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | –ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ | –•–µ—à-—Ç–∞–±–ª–∏—Ü–∞ |
| **–ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤** | –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∫–ª—é—á—É | –ù–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã |
| **–ü–æ–∏—Å–∫** | O(log n) | O(1) —Å—Ä–µ–¥–Ω–µ–µ, O(n) —Ö—É–¥—à–µ–µ |
| **–í—Å—Ç–∞–≤–∫–∞** | O(log n) | O(1) —Å—Ä–µ–¥–Ω–µ–µ, O(n) —Ö—É–¥—à–µ–µ |  
| **–£–¥–∞–ª–µ–Ω–∏–µ** | O(log n) | O(1) —Å—Ä–µ–¥–Ω–µ–µ, O(n) —Ö—É–¥—à–µ–µ |
| **–û–±—Ö–æ–¥ –≤ –ø–æ—Ä—è–¥–∫–µ –∫–ª—é—á–µ–π** | ‚úÖ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ | ‚ùå –¢—Ä–µ–±—É–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ |
| **–ü–∞–º—è—Ç—å** | –ú–µ–Ω—å—à–µ overhead | –ë–æ–ª—å—à–µ overhead |
| **–ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã** | –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ | –ú–æ–≥—É—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É**:
- **map**: –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫, —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å O(log n)
- **unordered_map**: –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ O(1), –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≤–∞–∂–µ–Ω

### map vs vector<pair<Key, T>>

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | s21::map | s21::vector<pair> |
|----------------|----------|-------------------|
| **–ü–æ–∏—Å–∫** | O(log n) | O(n) –ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ |
| **–í—Å—Ç–∞–≤–∫–∞** | O(log n) –ª—é–±–æ–µ –º–µ—Å—Ç–æ | O(n) —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞ |
| **–ü–∞–º—è—Ç—å** | –ë–æ–ª—å—à–µ (—É–∫–∞–∑–∞—Ç–µ–ª–∏) | –ú–µ–Ω—å—à–µ (–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –±–ª–æ–∫) |
| **–ö—ç—à-–¥—Ä—É–∂–µ–ª—é–±–Ω–æ—Å—Ç—å** | –•—É–∂–µ | –õ—É—á—à–µ |
| **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è** | –ß–∞—Å—Ç—ã–π –ø–æ–∏—Å–∫ | –†–µ–¥–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ s21::map:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –≠–ª–µ–º–µ–Ω—Ç—ã –≤—Å–µ–≥–¥–∞ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –∫–ª—é—á–∞–º  
‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: O(log n) –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  
‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π**: –ù–µ–≤–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã  
‚úÖ **–ë–æ–≥–∞—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –£–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏  
‚úÖ **STL-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü—Ä–∏–≤—ã—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤  

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å map:

üîç **–ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–∞–º** ‚Äî –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º  
üìä **–ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî —Å–≤—è–∑—å –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö  
üìà **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π  
üóÇÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
üìã **–ò–Ω–¥–µ–∫—Å—ã** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –±—ã—Å—Ç—Ä—ã—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤  

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

‚ùå **–ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∫–ª—é—á–∏** ‚Äî –∫–ª—é—á –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏  
‚ùå **Overhead –ø–∞–º—è—Ç–∏** ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É–∑–ª–æ–≤  
‚ùå **–ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü** ‚Äî O(log n) vs O(1) –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–∏—Å–∫–∞  

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

- **std::unordered_map** ‚Äî –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞
- **s21::multimap** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –∫–ª—é—á–µ–π  
- **s21::vector<pair>** ‚Äî –¥–ª—è —Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã** ‚Äî –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π

---

### üí° –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç

s21::map ‚Äî —ç—Ç–æ **–º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ï–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –∫–æ–≥–¥–∞ –≤–∞–∂–Ω—ã **—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å**, **—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π** –∏ **—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –±–∞–∑–µ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –ø–æ–º–æ–∂–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

**–£–¥–∞—á–∏ –≤ –æ—Å–≤–æ–µ–Ω–∏–∏ STL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤! üöÄ**

---

> üìù **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ s21::map –≤ —Ñ–∞–π–ª–µ `src/source/headers/s21_map.h` –ø—Ä–æ–µ–∫—Ç–∞ s21_containers. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–∞–∫–∂–µ –∏–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é [TREE.md](./TREE.md) –ø–æ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–º –¥–µ—Ä–µ–≤—å—è–º.