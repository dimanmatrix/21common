# –ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ: –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è](#–≤–≤–µ–¥–µ–Ω–∏–µ-–≤-–∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–µ-–¥–µ—Ä–µ–≤—å—è)
2. [–ò—Å—Ç–æ—Ä–∏—è –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è](#–∏—Å—Ç–æ—Ä–∏—è-–∏-–º–æ—Ç–∏–≤–∞—Ü–∏—è)
3. [–°–≤–æ–π—Å—Ç–≤–∞ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞](#—Å–≤–æ–π—Å—Ç–≤–∞-–∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–≥–æ-–¥–µ—Ä–µ–≤–∞)
4. [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Å-–¥—Ä—É–≥–∏–º–∏-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏-–¥–∞–Ω–Ω—ã—Ö)
5. [–ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏](#–∞–ª–≥–æ—Ä–∏—Ç–º—ã-–∏-–æ–ø–µ—Ä–∞—Ü–∏–∏)
6. [–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–¥–µ—Ç–∞–ª—å–Ω—ã–π-—Ä–∞–∑–±–æ—Ä-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
7. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–∏–º–µ—Ä—ã)
8. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

## üå≥ –í–≤–µ–¥–µ–Ω–∏–µ –≤ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è

**–ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ** ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Ç–∏–ø–æ–≤ —Å–∞–º–æ–±–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–∏—Ö—Å—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–µ—Ä–µ–≤—å–µ–≤ –ø–æ–∏—Å–∫–∞, –≥–¥–µ –∫–∞–∂–¥—ã–π —É–∑–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ü–≤–µ—Ç–µ (–∫—Ä–∞—Å–Ω—ã–π –∏–ª–∏ —á–µ—Ä–Ω—ã–π). –≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å O(log n) –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∏—Å–∫–∞, –≤—Å—Ç–∞–≤–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è.

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è?

–û–±—ã—á–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è –ø–æ–∏—Å–∫–∞ –º–æ–≥—É—Ç **–≤—ã—Ä–æ–∂–¥–∞—Ç—å—Å—è** –≤ –ª–∏–Ω–µ–π–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–ø–æ —Å—É—Ç–∏, —Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫) –ø—Ä–∏ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –≤—Å—Ç–∞–≤–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä:

```
–ü–ª–æ—Ö–æ–µ –¥–µ—Ä–µ–≤–æ:     –•–æ—Ä–æ—à–µ–µ –¥–µ—Ä–µ–≤–æ:
    1                   4
     \                /   \
      2               2     6
       \             / \   / \
        3           1   3 5   7
         \
          4
           \
            5
             \
              6
               \
                7
```

–í –ª–µ–≤–æ–º —Å–ª—É—á–∞–µ –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ 7 –ø–æ—Ç—Ä–µ–±—É–µ—Ç 7 –æ–ø–µ—Ä–∞—Ü–∏–π (O(n)), –≤ –ø—Ä–∞–≤–æ–º ‚Äî –≤—Å–µ–≥–æ 3 (O(log n)).

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

–ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è —á—Ç–æ —Å–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è –¥–æ –ª–∏—Å—Ç–∞ –Ω–µ –±–æ–ª–µ–µ —á–µ–º –≤ **2 —Ä–∞–∑–∞ –¥–ª–∏–Ω–Ω–µ–µ** —Å–∞–º–æ–≥–æ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –ø—É—Ç–∏.

---

## üèõÔ∏è –ò—Å—Ç–æ—Ä–∏—è –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è  

### –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ "–∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ"?

–¶–≤–µ—Ç–∞ **–∫—Ä–∞—Å–Ω—ã–π** –∏ **—á–µ—Ä–Ω—ã–π** –±—ã–ª–∏ –≤—ã–±—Ä–∞–Ω—ã —á–∏—Å—Ç–æ **–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏**. –†—É–¥–æ–ª—å—Ñ –ë–∞–π–µ—Ä –≤ 1972 –≥–æ–¥—É –∏–∑–æ–±—Ä–µ–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–∑—ã–≤–∞–ª **"—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ B-–¥–µ—Ä–µ–≤—å—è"**. –ü–æ–∑–∂–µ –õ–µ–æ –ì—É–∏–±–∞—Å –∏ –†–æ–±–µ—Ä—Ç –°–µ–¥–∂–≤–∏–∫ –≤ 1978 –≥–æ–¥—É –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–ª–∏ –∏—Ö –∫–∞–∫ "–∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è", –≤—ã–±—Ä–∞–≤ —ç—Ç–∏ —Ü–≤–µ—Ç–∞ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –Ω–∞ —á–µ—Ä–Ω–æ-–±–µ–ª—ã—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

> üí° **–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç**: –ú–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞ ‚Äî —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ –∏ –∫–≤–∞–¥—Ä–∞—Ç—ã, –µ–¥–∏–Ω–∏—Ü—ã –∏ –Ω—É–ª–∏, –∏–ª–∏ –¥–∞–∂–µ —ç–º–æ–¥–∑–∏ üî¥üîµ

### –≠–≤–æ–ª—é—Ü–∏—è –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö –∫ —Å–∞–º–æ–±–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–∏–º—Å—è –¥–µ—Ä–µ–≤—å—è–º

```
1. –ü—Ä–æ—Å—Ç–æ–µ BST ‚Üí –ú–æ–∂–µ—Ç –≤—ã—Ä–æ–∂–¥–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–æ–∫ –û(n)
2. AVL-–¥–µ—Ä–µ–≤–æ ‚Üí –°—Ç—Ä–æ–≥–æ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ, –Ω–æ –º–Ω–æ–≥–æ –≤—Ä–∞—â–µ–Ω–∏–π –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ/—É–¥–∞–ª–µ–Ω–∏–∏
3. –ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ ‚Üí –ú–µ–Ω–µ–µ —Å—Ç—Ä–æ–≥–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞, –º–µ–Ω—å—à–µ –≤—Ä–∞—â–µ–Ω–∏–π, –ø—Ä–æ—â–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```

---

## ‚öñÔ∏è –°–≤–æ–π—Å—Ç–≤–∞ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞

–ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –¥–æ–ª–∂–Ω–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å **5 –∫–ª—é—á–µ–≤—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º**:

### 1Ô∏è‚É£ –ö–∞–∂–¥—ã–π —É–∑–µ–ª –ª–∏–±–æ –∫—Ä–∞—Å–Ω—ã–π, –ª–∏–±–æ —á–µ—Ä–Ω—ã–π

```cpp
enum Color { RED, BLACK };  // –ü—Ä–æ—Å—Ç–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
```

### 2Ô∏è‚É£ –ö–æ—Ä–µ–Ω—å –≤—Å–µ–≥–¥–∞ —á–µ—Ä–Ω—ã–π

```
       [B] ‚Üê –ö–æ—Ä–µ–Ω—å –≤—Å–µ–≥–¥–∞ —á–µ—Ä–Ω—ã–π
      /   \
    [R]   [R]
```

### 3Ô∏è‚É£ –í—Å–µ –ª–∏—Å—Ç—å—è (NIL/NULL —É–∑–ª—ã) —á–µ—Ä–Ω—ã–µ

–í –Ω–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **sentinel —É–∑–µ–ª** `nil_` ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —á–µ—Ä–Ω—ã–π —É–∑–µ–ª, –∑–∞–º–µ–Ω—è—é—â–∏–π –≤—Å–µ NULL —É–∫–∞–∑–∞—Ç–µ–ª–∏:

```
       [B]
      /   \
    [R]   [R]  
   /  \  /  \
 nil nil nil nil ‚Üê –í—Å–µ "–ª–∏—Å—Ç—å—è" —á–µ—Ä–Ω—ã–µ
```

### 4Ô∏è‚É£ –ï—Å–ª–∏ —É–∑–µ–ª –∫—Ä–∞—Å–Ω—ã–π, —Ç–æ –æ–±–∞ –µ–≥–æ —Ä–µ–±–µ–Ω–∫–∞ —á–µ—Ä–Ω—ã–µ

**–ù–ï–¢ –¥–≤—É—Ö –ø–æ–¥—Ä—è–¥ –∫—Ä–∞—Å–Ω—ã—Ö —É–∑–ª–æ–≤** –ø–æ –ª—é–±–æ–º—É –ø—É—Ç–∏:

```
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:    ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
    [B]              [B]
   /   \            /   \
 [R]   [B]        [R]   [B]
 /  \              /
[B] [B]          [R] ‚Üê –î–≤–∞ –∫—Ä–∞—Å–Ω—ã—Ö –ø–æ–¥—Ä—è–¥!
```

### 5Ô∏è‚É£ –í—Å–µ –ø—Ä–æ—Å—Ç—ã–µ –ø—É—Ç–∏ –æ—Ç —É–∑–ª–∞ –¥–æ –ª–∏—Å—Ç—å–µ–≤ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ—Ä–Ω—ã—Ö —É–∑–ª–æ–≤

–≠—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **"—á–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞"**:

```
         [B]     ‚Üê –ß–µ—Ä–Ω—ã—Ö —É–∑–ª–æ–≤: 1
        /   \
      [R]   [B]  ‚Üê –°–ª–µ–≤–∞ +0, —Å–ø—Ä–∞–≤–∞ +1
     /  \      \
   [B]  [B]    [R] ‚Üê –°–ª–µ–≤–∞ +1, –≤ —Ü–µ–Ω—Ç—Ä–µ +1, —Å–ø—Ä–∞–≤–∞ +0
               /
             [B]     ‚Üê –°–ø—Ä–∞–≤–∞ +1

–í—Å–µ –ø—É—Ç–∏ –æ—Ç –∫–æ—Ä–Ω—è –¥–æ nil —Å–æ–¥–µ—Ä–∂–∞—Ç —Ä–æ–≤–Ω–æ 2 —á–µ—Ä–Ω—ã—Ö —É–∑–ª–∞!
```

### –ü–æ—á–µ–º—É —ç—Ç–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±–∞–ª–∞–Ω—Å?

**–ö–ª—é—á–µ–≤–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π –ø—É—Ç—å –Ω–µ –±–æ–ª–µ–µ —á–µ–º –≤ **2 —Ä–∞–∑–∞** –¥–ª–∏–Ω–Ω–µ–µ —Å–∞–º–æ–≥–æ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ.

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ**:
- –°–∞–º—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–Ω—ã–µ —É–∑–ª—ã
- –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π –ø—É—Ç—å —á–µ—Ä–µ–¥—É–µ—Ç –∫—Ä–∞—Å–Ω—ã–µ –∏ —á–µ—Ä–Ω—ã–µ —É–∑–ª—ã  
- –ü–æ —Å–≤–æ–π—Å—Ç–≤—É 5, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ—Ä–Ω—ã—Ö —É–∑–ª–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–æ –≤—Å–µ—Ö –ø—É—Ç—è—Ö
- –ü–æ —Å–≤–æ–π—Å—Ç–≤—É 4, –º–µ–∂–¥—É —á–µ—Ä–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–∞–∫—Å–∏–º—É–º –æ–¥–∏–Ω –∫—Ä–∞—Å–Ω—ã–π
- –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: `max_path ‚â§ 2 √ó min_path`

---

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö | –ü–æ–∏—Å–∫ | –í—Å—Ç–∞–≤–∫–∞ | –£–¥–∞–ª–µ–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|------------------|-------|---------|----------|----------------------|------------|
| **–ú–∞—Å—Å–∏–≤** | O(n) | O(n) | O(n) | –ù–µ –Ω—É–∂–Ω–∞ | –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ |
| **–û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤** | O(log n) | O(n) | O(n) | –ù–µ –Ω—É–∂–Ω–∞ | –†–µ–¥–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è |
| **–ü—Ä–æ—Å—Ç–æ–µ BST** | O(n) | O(n) | O(n) | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| **AVL-–¥–µ—Ä–µ–≤–æ** | O(log n) | O(log n) | O(log n) | –í—ã—Å–æ–∫–∞—è (–º–Ω–æ–≥–æ –≤—Ä–∞—â–µ–Ω–∏–π) | –ú–Ω–æ–≥–æ –ø–æ–∏—Å–∫–æ–≤ |
| **–ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ** | O(log n) | O(log n) | O(log n) | –£–º–µ—Ä–µ–Ω–Ω–∞—è | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
| **B-–¥–µ—Ä–µ–≤–æ** | O(log n) | O(log n) | O(log n) | –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è | –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã |

### AVL vs –ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ

**AVL-–¥–µ—Ä–µ–≤–æ**:
- ‚úÖ –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ (–≤—ã—Å–æ—Ç–∞ ‚â§ 1.44 log n)
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –ø–æ–∏—Å–∫
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ (–±–æ–ª—å—à–µ –≤—Ä–∞—â–µ–Ω–∏–π)
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ**:
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ (–º–µ–Ω—å—à–µ –≤—Ä–∞—â–µ–Ω–∏–π)  
- ‚úÖ –ü—Ä–æ—â–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –õ—É—á—à–µ –¥–ª—è —á–∞—Å—Ç—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ùå –ß—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ –ø–æ–∏—Å–∫ (–≤—ã—Å–æ—Ç–∞ ‚â§ 2 log n)

> üéØ **–í—ã–≤–æ–¥**: –ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π **–∫–æ–º–ø—Ä–æ–º–∏—Å—Å** –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–æ—Å—Ç–æ—Ç–æ–π, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ STL (map, set), Java (TreeMap, TreeSet), .NET (SortedDictionary).

---

## ‚öôÔ∏è –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏

### üîÑ –í—Ä–∞—â–µ–Ω–∏—è (Rotations)

**–í—Ä–∞—â–µ–Ω–∏—è** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞. –≠—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–µ—Ä–µ–≤–∞, —Å–æ—Ö—Ä–∞–Ω—è—è –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

#### –õ–µ–≤–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ (Left Rotation)

–ü–æ–¥–Ω–∏–º–∞–µ–º –ø—Ä–∞–≤–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞ –Ω–∞ –º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞:

```
–î–æ –≤—Ä–∞—â–µ–Ω–∏—è:        –ü–æ—Å–ª–µ –≤—Ä–∞—â–µ–Ω–∏—è:
    x                    y
   / \                  / \
  Œ±   y       ‚Üí        x   Œ≥  
     / \              / \
    Œ≤   Œ≥            Œ±   Œ≤
```

**–ö–æ–¥ –æ–ø–µ—Ä–∞—Ü–∏–∏**:
```cpp
void rotate_left(Node* x) {
    Node* y = x->right;           // y ‚Äî –ø—Ä–∞–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫ x
    x->right = y->left;           // Œ≤ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –∫ x
    
    if (y->left != nil_) {        // –ï—Å–ª–∏ Œ≤ –Ω–µ –ø—É—Å—Ç–æ–µ
        y->left->parent = x;      // –æ–±–Ω–æ–≤–ª—è–µ–º parent Œ≤
    }
    
    y->parent = x->parent;        // y –∑–∞–º–µ–Ω—è–µ—Ç x –≤ –¥–µ—Ä–µ–≤–µ
    
    if (x->parent == nil_) {      // –ï—Å–ª–∏ x ‚Äî –∫–æ—Ä–µ–Ω—å
        root_ = y;                // y —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–æ–≤—ã–º –∫–æ—Ä–Ω–µ–º
    } else if (x == x->parent->left) {  // x ‚Äî –ª–µ–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫
        x->parent->left = y;      // y —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–µ–≤—ã–º —Ä–µ–±–µ–Ω–∫–æ–º
    } else {                      // x ‚Äî –ø—Ä–∞–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫
        x->parent->right = y;     // y —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∞–≤—ã–º —Ä–µ–±–µ–Ω–∫–æ–º  
    }
    
    y->left = x;                  // x —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–µ–≤—ã–º —Ä–µ–±–µ–Ω–∫–æ–º y
    x->parent = y;                // –û–±–Ω–æ–≤–ª—è–µ–º parent x
}
```

#### –ü—Ä–∞–≤–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ (Right Rotation)

–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ –ª–µ–≤–æ–º—É ‚Äî –ø–æ–¥–Ω–∏–º–∞–µ–º –ª–µ–≤–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞:

```
–î–æ –≤—Ä–∞—â–µ–Ω–∏—è:        –ü–æ—Å–ª–µ –≤—Ä–∞—â–µ–Ω–∏—è:
      y                  x
     / \                / \
    x   Œ≥      ‚Üí       Œ±   y
   / \                    / \
  Œ±   Œ≤                  Œ≤   Œ≥
```

### üîç –ü–æ–∏—Å–∫ (Search)

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –≤ BST ‚Äî O(log n):

```cpp
Node* find_node(const key_type& key) const {
    Node* current = root_;
    
    while (current != nil_) {
        key_type current_key = key_of_value_(current->data);
        
        if (comp_(key, current_key)) {
            current = current->left;      // –ò–¥–µ–º –≤–ª–µ–≤–æ
        } else if (comp_(current_key, key)) {
            current = current->right;     // –ò–¥–µ–º –≤–ø—Ä–∞–≤–æ  
        } else {
            return current;               // –ù–∞–π–¥–µ–Ω–æ!
        }
    }
    
    return nil_;                          // –ù–µ –Ω–∞–π–¥–µ–Ω–æ
}
```

### ‚ûï –í—Å—Ç–∞–≤–∫–∞ (Insertion)

–í—Å—Ç–∞–≤–∫–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **–¥–≤—É—Ö —ç—Ç–∞–ø–æ–≤**:
1. **–û–±—ã—á–Ω–∞—è BST-–≤—Å—Ç–∞–≤–∫–∞** –Ω–æ–≤–æ–≥–æ –∫—Ä–∞—Å–Ω–æ–≥–æ —É–∑–ª–∞
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** (insert_fixup)

#### –≠—Ç–∞–ø 1: BST-–≤—Å—Ç–∞–≤–∫–∞

```cpp
// –ù–∞—Ö–æ–¥–∏–º –º–µ—Å—Ç–æ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ (–∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–º BST)
Node* parent = nil_;
Node* current = root_;

while (current != nil_) {
    parent = current;
    if (comp_(key, current_key)) {
        current = current->left;
    } else {
        current = current->right;
    }
}

// –°–æ–∑–¥–∞–µ–º –ö–†–ê–°–ù–´–ô —É–∑–µ–ª (–≤–∞–∂–Ω–æ!)
Node* new_node = new Node(value);
new_node->color = RED;  // –í—Å–µ–≥–¥–∞ –∫—Ä–∞—Å–Ω—ã–π!
new_node->parent = parent;
new_node->left = new_node->right = nil_;
```

> ‚ùì **–ü–æ—á–µ–º—É –Ω–æ–≤—ã–π —É–∑–µ–ª –∫—Ä–∞—Å–Ω—ã–π?** –ï—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ —á–µ—Ä–Ω—ã–º, —ç—Ç–æ –Ω–∞—Ä—É—à–∏—Ç —Å–≤–æ–π—Å—Ç–≤–æ 5 (—á–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞) –Ω–∞ –≤—Å–µ—Ö –ø—É—Ç—è—Ö —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç —É–∑–µ–ª. –ö—Ä–∞—Å–Ω—ã–π —É–∑–µ–ª –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–π—Å—Ç–≤–æ 4, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ—â–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

#### –≠—Ç–∞–ø 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (insert_fixup)

–ü–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏ –∫—Ä–∞—Å–Ω–æ–≥–æ —É–∑–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ 4 (–¥–≤–∞ –∫—Ä–∞—Å–Ω—ã—Ö —É–∑–ª–∞ –ø–æ–¥—Ä—è–¥). –ê–ª–≥–æ—Ä–∏—Ç–º `insert_fixup` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **3 —Å–ª—É—á–∞—è** –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –¥–µ—Ä–µ–≤–∞.

**–°–ª—É—á–∞–π 1**: –î—è–¥—è –∫—Ä–∞—Å–Ω—ã–π üî¥

```
       [B] –¥–µ–¥—É—à–∫–∞           [R] –¥–µ–¥—É—à–∫–∞
      /   \         ‚Üí       /   \
   [R] p  [R] –¥—è–¥—è      [B] p  [B] –¥—è–¥—è  
   /                   /
 [R] z              [R] z
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –ü–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è –∏ –¥—è–¥—é –≤ —á–µ—Ä–Ω—ã–π, –¥–µ–¥—É—à–∫—É –≤ –∫—Ä–∞—Å–Ω—ã–π, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –¥–µ–¥—É—à–∫–∏.

**–°–ª—É—á–∞–π 2**: –î—è–¥—è —á–µ—Ä–Ω—ã–π, z ‚Äî –ø—Ä–∞–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫ 

```
     [B] –¥–µ–¥—É—à–∫–∞        [B] –¥–µ–¥—É—à–∫–∞
    /   \         ‚Üí    /   \
  [R] p [B] –¥—è–¥—è      [R] z [B] –¥—è–¥—è
    \                 /
    [R] z           [R] p
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –õ–µ–≤—ã–π –ø–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ p, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª—É—á–∞—é 3.

**–°–ª—É—á–∞–π 3**: –î—è–¥—è —á–µ—Ä–Ω—ã–π, z ‚Äî –ª–µ–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫

```
     [B] –¥–µ–¥—É—à–∫–∞        [B] p
    /   \         ‚Üí    /   \
  [R] p [B] –¥—è–¥—è      [R] z [R] –¥–µ–¥—É—à–∫–∞
  /                           \
[R] z                       [B] –¥—è–¥—è
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –ü–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ–º p –≤ —á–µ—Ä–Ω—ã–π, –¥–µ–¥—É—à–∫—É –≤ –∫—Ä–∞—Å–Ω—ã–π, –ø—Ä–∞–≤—ã–π –ø–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –¥–µ–¥—É—à–∫–∏.

### ‚ûñ –£–¥–∞–ª–µ–Ω–∏–µ (Deletion)

–£–¥–∞–ª–µ–Ω–∏–µ ‚Äî —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–º –¥–µ—Ä–µ–≤–µ. –û–Ω–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —ç—Ç–∞–ø–æ–≤:

1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ BST-—É–¥–∞–ª–µ–Ω–∏–µ**
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –Ω—É–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**  
3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** (delete_fixup)

#### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ BST-—É–¥–∞–ª–µ–Ω–∏–µ

–ï—Å—Ç—å 3 —Å–ª—É—á–∞—è —É–¥–∞–ª–µ–Ω–∏—è —É–∑–ª–∞:

1. **–ù–µ—Ç –¥–µ—Ç–µ–π**: –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ–º —É–∑–µ–ª
2. **–û–¥–∏–Ω —Ä–µ–±–µ–Ω–æ–∫**: –ó–∞–º–µ–Ω—è–µ–º —É–∑–µ–ª –µ–≥–æ —Ä–µ–±–µ–Ω–∫–æ–º
3. **–î–≤–∞ —Ä–µ–±–µ–Ω–∫–∞**: –ó–∞–º–µ–Ω—è–µ–º —É–∑–µ–ª –µ–≥–æ –ø—Ä–µ–µ–º–Ω–∏–∫–æ–º (–º–∏–Ω–∏–º—É–º –≤ –ø—Ä–∞–≤–æ–º –ø–æ–¥–¥–µ—Ä–µ–≤–µ)

#### –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ?

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω—É–∂–Ω–æ, –µ—Å–ª–∏ **—É–¥–∞–ª–µ–Ω–Ω—ã–π —É–∑–µ–ª –±—ã–ª —á–µ—Ä–Ω—ã–º**. –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≥–æ —É–∑–ª–∞ –Ω–∞—Ä—É—à–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ 5 (—á–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞).

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (delete_fixup)

–ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **4 —Å–ª—É—á–∞—è** –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –¥–µ—Ä–µ–≤–∞, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è —á–µ—Ä–Ω—É—é –≤—ã—Å–æ—Ç—É.

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä–µ–º –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ `src/source/s21_binary_tree.cpp`:

### üèóÔ∏è –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```cpp
RedBlackTree() : root_(nullptr), nil_(nullptr), size_(0), comp_(Compare()), key_of_value_(KeyOfValue()) {
    init_tree();
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –ø—É—Å—Ç–æ–µ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ.

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–ª—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. –í—ã–∑—ã–≤–∞–µ—Ç `init_tree()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è sentinel —É–∑–ª–∞

**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(1)

#### init_tree()
```cpp
void init_tree() {
    nil_ = new Node();                    // –°–æ–∑–¥–∞–µ–º sentinel —É–∑–µ–ª
    nil_->color = BLACK;                  // Sentinel –≤—Å–µ–≥–¥–∞ —á–µ—Ä–Ω—ã–π
    nil_->left = nil_->right = nil_->parent = nil_;  // –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–µ–±—è
    root_ = nil_;                         // –ü—É—Å—Ç–æ–µ –¥–µ—Ä–µ–≤–æ
    size_ = 0;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–µ—Ä–µ–≤–∞.

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è**: Sentinel —É–∑–µ–ª `nil_` –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ NULL —É–∫–∞–∑–∞—Ç–µ–ª–∏, —É–ø—Ä–æ—â–∞—è –ª–æ–≥–∏–∫—É –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
```cpp
RedBlackTree(const RedBlackTree& other) : /* –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–µ–π */ {
    init_tree();
    if (other.root_ != other.nil_) {
        root_ = copy_tree(other.root_, nil_, other);
        size_ = other.size_;
    }
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –≥–ª—É–±–æ–∫—É—é –∫–æ–ø–∏—é –¥—Ä—É–≥–æ–≥–æ –¥–µ—Ä–µ–≤–∞.

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—É—Å—Ç–æ–µ –¥–µ—Ä–µ–≤–æ
2. –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ —É–∑–ª—ã —Å –ø–æ–º–æ—â—å—é `copy_tree()`
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ü–≤–µ—Ç–∞ —É–∑–ª–æ–≤

**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: O(n)

#### copy_tree()
```cpp
Node* copy_tree(Node* node, Node* parent, const RedBlackTree& other) {
    if (node == other.nil_) {
        return nil_;                      // –ë–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π —Ä–µ–∫—É—Ä—Å–∏–∏
    }
    
    Node* new_node = new Node(node->data);  // –ö–æ–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
    new_node->color = node->color;          // –ö–æ–ø–∏—Ä—É–µ–º —Ü–≤–µ—Ç
    new_node->parent = parent;              // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
    
    // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø–∏—Ä—É–µ–º –¥–µ—Ç–µ–π
    new_node->left = copy_tree(node->left, new_node, other);
    new_node->right = copy_tree(node->right, new_node, other);
    
    return new_node;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø–∏—Ä—É–µ—Ç –ø–æ–¥–¥–µ—Ä–µ–≤–æ, —Å–æ—Ö—Ä–∞–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

**–ê–ª–≥–æ—Ä–∏—Ç–º**: Pre-order –æ–±—Ö–æ–¥ ‚Äî —Å–æ–∑–¥–∞–µ–º —É–∑–µ–ª, –∑–∞—Ç–µ–º –∫–æ–ø–∏—Ä—É–µ–º –¥–µ—Ç–µ–π.

#### –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä
```cpp
~RedBlackTree() {
    if (nil_) {
        destroy_tree(root_);              // –£–¥–∞–ª—è–µ–º –≤—Å–µ —É–∑–ª—ã
        delete nil_;                      // –£–¥–∞–ª—è–µ–º sentinel
    }
}
```

#### destroy_tree()
```cpp
void destroy_tree(Node* node) {
    if (node != nil_) {
        destroy_tree(node->left);         // –£–¥–∞–ª—è–µ–º –ª–µ–≤–æ–µ –ø–æ–¥–¥–µ—Ä–µ–≤–æ
        destroy_tree(node->right);        // –£–¥–∞–ª—è–µ–º –ø—Ä–∞–≤–æ–µ –ø–æ–¥–¥–µ—Ä–µ–≤–æ
        delete node;                      // –£–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —É–∑–µ–ª
    }
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤—Å—é –ø–∞–º—è—Ç—å –¥–µ—Ä–µ–≤–∞.

**–ê–ª–≥–æ—Ä–∏—Ç–º**: Post-order –æ–±—Ö–æ–¥ ‚Äî —Å–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ–º –¥–µ—Ç–µ–π, –ø–æ—Ç–æ–º —Ä–æ–¥–∏—Ç–µ–ª—è.

### üîÑ –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã

–ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç **in-order –æ–±—Ö–æ–¥** –¥–µ—Ä–µ–≤–∞ (—ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ).

#### begin()
```cpp
iterator begin() {
    if (root_ == nil_) {
        return iterator(nil_, this);      // –ü—É—Å—Ç–æ–µ –¥–µ—Ä–µ–≤–æ
    }
    return iterator(tree_minimum(root_), this);  // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
}
```

#### tree_minimum()
```cpp
Node* tree_minimum(Node* node) const {
    while (node->left != nil_) {          // –ò–¥–µ–º –≤–ª–µ–≤–æ –¥–æ –∫–æ–Ω—Ü–∞
        node = node->left;
    }
    return node;                          // –°–∞–º—ã–π –ª–µ–≤—ã–π = –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
}
```

#### –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ (operator++)
```cpp
TreeIterator& operator++() {
    if (node_->right != tree_->nil_) {
        // –ï—Å—Ç—å –ø—Ä–∞–≤–æ–µ –ø–æ–¥–¥–µ—Ä–µ–≤–æ ‚Üí –∏–¥–µ–º –∫ –µ–≥–æ –º–∏–Ω–∏–º—É–º—É
        node_ = tree_->tree_minimum(node_->right);
    } else {
        // –ù–µ—Ç –ø—Ä–∞–≤–æ–≥–æ –ø–æ–¥–¥–µ—Ä–µ–≤–∞ ‚Üí –ø–æ–¥–Ω–∏–º–∞–µ–º—Å—è –≤–≤–µ—Ä—Ö
        Node* parent = node_->parent;
        while (parent != tree_->nil_ && node_ == parent->right) {
            node_ = parent;
            parent = parent->parent;
        }
        node_ = parent;
    }
    return *this;
}
```

**–õ–æ–≥–∏–∫–∞ in-order –æ–±—Ö–æ–¥–∞**:
1. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–æ–µ –ø–æ–¥–¥–µ—Ä–µ–≤–æ ‚Üí —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –≤ –µ–≥–æ –ª–µ–≤–æ–π —á–∞—Å—Ç–∏
2. –ò–Ω–∞—á–µ –ø–æ–¥–Ω–∏–º–∞–µ–º—Å—è –≤–≤–µ—Ä—Ö, –ø–æ–∫–∞ –Ω–µ —Å—Ç–∞–Ω–µ–º –ª–µ–≤—ã–º —Ä–µ–±–µ–Ω–∫–æ–º

### üìä –û–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### insert_unique()
```cpp
std::pair<iterator, bool> insert_unique(const value_type& value) {
    Node* parent = nil_;
    Node* current = root_;
    
    // 1. –ü–æ–∏—Å–∫ –º–µ—Å—Ç–∞ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π BST)
    while (current != nil_) {
        parent = current;
        key_type key = key_of_value_(value);
        key_type current_key = key_of_value_(current->data);
        
        if (comp_(key, current_key)) {
            current = current->left;
        } else if (comp_(current_key, key)) {
            current = current->right;
        } else {
            // –ö–ª—é—á —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            return std::make_pair(iterator(current, this), false);
        }
    }
    
    // 2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ö–†–ê–°–ù–û–ì–û —É–∑–ª–∞
    Node* new_node = new Node(value);
    new_node->parent = parent;
    new_node->left = new_node->right = nil_;
    new_node->color = RED;  // –í–∞–∂–Ω–æ: –≤—Å–µ–≥–¥–∞ –∫—Ä–∞—Å–Ω—ã–π!
    
    // 3. –í—Å—Ç–∞–≤–∫–∞ –≤ –¥–µ—Ä–µ–≤–æ
    if (parent == nil_) {
        root_ = new_node;     // –ù–æ–≤—ã–π –∫–æ—Ä–µ–Ω—å
    } else if (comp_(key_of_value_(value), key_of_value_(parent->data))) {
        parent->left = new_node;
    } else {
        parent->right = new_node;
    }
    
    // 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞
    insert_fixup(new_node);
    ++size_;
    
    return std::make_pair(iterator(new_node, this), true);
}
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã**:
- –ù–æ–≤—ã–π —É–∑–µ–ª –≤—Å–µ–≥–¥–∞ **–∫—Ä–∞—Å–Ω—ã–π** (–º–µ–Ω—å—à–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä—É: –∏—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç + —Ñ–ª–∞–≥ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- –î–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (map, set) –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è

#### insert_fixup()
```cpp
void insert_fixup(Node* z) {
    while (z->parent->color == RED) {  // –ü–æ–∫–∞ –µ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ 4
        if (z->parent == z->parent->parent->left) {  // –†–æ–¥–∏—Ç–µ–ª—å ‚Äî –ª–µ–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫
            Node* y = z->parent->parent->right;      // –î—è–¥—è
            
            if (y->color == RED) {
                // –°–ª—É—á–∞–π 1: –¥—è–¥—è –∫—Ä–∞—Å–Ω—ã–π ‚Üí –ø–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ–º
                z->parent->color = BLACK;
                y->color = BLACK;
                z->parent->parent->color = RED;
                z = z->parent->parent;  // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –¥–µ–¥—É—à–∫–∏
            } else {
                if (z == z->parent->right) {
                    // –°–ª—É—á–∞–π 2: z ‚Äî –ø—Ä–∞–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫ ‚Üí –ª–µ–≤—ã–π –ø–æ–≤–æ—Ä–æ—Ç
                    z = z->parent;
                    rotate_left(z);
                }
                // –°–ª—É—á–∞–π 3: z ‚Äî –ª–µ–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫ ‚Üí –ø–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ–º –∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
                z->parent->color = BLACK;
                z->parent->parent->color = RED;
                rotate_right(z->parent->parent);
            }
        } else {
            // –°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π —Å–ª—É—á–∞–π –¥–ª—è –ø—Ä–∞–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
            // ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ ...
        }
    }
    root_->color = BLACK;  // –ö–æ—Ä–µ–Ω—å –≤—Å–µ–≥–¥–∞ —á–µ—Ä–Ω—ã–π
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ 4 (–¥–≤–∞ –∫—Ä–∞—Å–Ω—ã—Ö –ø–æ–¥—Ä—è–¥)
2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª—É—á–∞–π –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
3. –ü–æ–≤—Ç–æ—Ä—è–µ–º, –ø–æ–∫–∞ –≤—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
4. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –∫–æ—Ä–µ–Ω—å —á–µ—Ä–Ω—ã–π

#### erase() –ø–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—É
```cpp
void erase(iterator pos) {
    if (pos.node_ == nil_) return;
    
    Node* node_to_delete = pos.node_;
    Node* y = node_to_delete;    // –£–∑–µ–ª –¥–ª—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    Node* x;                     // –£–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–π–º–µ—Ç –º–µ—Å—Ç–æ y
    Color y_original_color = y->color;  // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º —Ü–≤–µ—Ç
    
    // –°–ª—É—á–∞–π 1: –Ω–µ—Ç –ª–µ–≤–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞
    if (node_to_delete->left == nil_) {
        x = node_to_delete->right;
        transplant(node_to_delete, node_to_delete->right);
    }
    // –°–ª—É—á–∞–π 2: –Ω–µ—Ç –ø—Ä–∞–≤–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞  
    else if (node_to_delete->right == nil_) {
        x = node_to_delete->left;
        transplant(node_to_delete, node_to_delete->left);
    }
    // –°–ª—É—á–∞–π 3: –µ—Å—Ç—å –æ–±–∞ —Ä–µ–±–µ–Ω–∫–∞
    else {
        y = tree_minimum(node_to_delete->right);  // –ü—Ä–µ–µ–º–Ω–∏–∫
        y_original_color = y->color;
        x = y->right;
        
        if (y->parent == node_to_delete) {
            x->parent = y;
        } else {
            transplant(y, y->right);
            y->right = node_to_delete->right;
            y->right->parent = y;
        }
        
        transplant(node_to_delete, y);
        y->left = node_to_delete->left;
        y->left->parent = y;
        y->color = node_to_delete->color;  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ü–≤–µ—Ç
    }
    
    delete node_to_delete;
    --size_;
    
    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–¥–∞–ª–∏–ª–∏ —á–µ—Ä–Ω—ã–π —É–∑–µ–ª
    if (y_original_color == BLACK) {
        delete_fixup(x);
    }
}
```

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è**: –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É–∑–ª–∞ —Å –¥–≤—É–º—è –¥–µ—Ç—å–º–∏ –∑–∞–º–µ–Ω—è–µ–º –µ–≥–æ –ø—Ä–µ–µ–º–Ω–∏–∫–æ–º (–º–∏–Ω–∏–º—É–º –≤ –ø—Ä–∞–≤–æ–º –ø–æ–¥–¥–µ—Ä–µ–≤–µ), —Å–æ—Ö—Ä–∞–Ω—è—è —Ü–≤–µ—Ç —É–¥–∞–ª—è–µ–º–æ–≥–æ —É–∑–ª–∞.

#### transplant()
```cpp
void transplant(Node* u, Node* v) {
    if (u->parent == nil_) {
        root_ = v;                    // u –±—ã–ª –∫–æ—Ä–Ω–µ–º
    } else if (u == u->parent->left) {
        u->parent->left = v;          // u ‚Äî –ª–µ–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫
    } else {
        u->parent->right = v;         // u ‚Äî –ø—Ä–∞–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫
    }
    v->parent = u->parent;            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è v
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–µ–≤–æ u –Ω–∞ –ø–æ–¥–¥–µ—Ä–µ–≤–æ v.

### üîç –û–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞

#### lower_bound()
```cpp
Node* lower_bound_node(const key_type& key) const {
    Node* current = root_;
    Node* result = nil_;
    
    while (current != nil_) {
        key_type current_key = key_of_value_(current->data);
        
        if (!comp_(current_key, key)) {  // current_key >= key
            result = current;            // –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            current = current->left;     // –ò—â–µ–º –º–µ–Ω—å—à–∏–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π
        } else {
            current = current->right;    // –ò–¥–µ–º –∫ –±–æ–ª—å—à–∏–º –∑–Ω–∞—á–µ–Ω–∏—è–º
        }
    }
    
    return result;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å –∫–ª—é—á–æ–º ‚â• –∑–∞–¥–∞–Ω–Ω–æ–≥–æ.

**–ê–ª–≥–æ—Ä–∏—Ç–º**: –ò–¥–µ–º –ø–æ –¥–µ—Ä–µ–≤—É, –∑–∞–ø–æ–º–∏–Ω–∞—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π —É–∑–µ–ª.

#### upper_bound()
```cpp
Node* upper_bound_node(const key_type& key) const {
    Node* current = root_;
    Node* result = nil_;
    
    while (current != nil_) {
        key_type current_key = key_of_value_(current->data);
        
        if (comp_(key, current_key)) {  // key < current_key
            result = current;           // –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            current = current->left;    // –ò—â–µ–º –º–µ–Ω—å—à–∏–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π
        } else {
            current = current->right;   // –ò–¥–µ–º –∫ –±–æ–ª—å—à–∏–º –∑–Ω–∞—á–µ–Ω–∏—è–º
        }
    }
    
    return result;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å –∫–ª—é—á–æ–º > –∑–∞–¥–∞–Ω–Ω–æ–≥–æ.

#### count()
```cpp
size_type count(const key_type& key) const {
    auto range = equal_range(key);      // –ü–æ–ª—É—á–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω
    size_type count = 0;
    
    for (auto it = range.first; it != range.second; ++it) {
        count++;                        // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
    }
    
    return count;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º.

**–î–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** (map, set): –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 –∏–ª–∏ 1
**–î–ª—è multiset**: –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–µ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ

### üéØ –ë–æ–Ω—É—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### insert_many() 
```cpp
template <typename... Args>
s21::vector<std::pair<iterator, bool>> insert_many(Args&&... args) {
    s21::vector<std::pair<iterator, bool>> results;
    results.reserve(sizeof...(args));   // –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –ø–∞–º—è—Ç—å
    
    // C++17 fold expression ‚Äî –≤—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç
    (results.push_back(insert(std::forward<Args>(args))), ...);
    
    return results;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç**:
- **Perfect forwarding** –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- **Fold expression** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ variadic template
- **Memory reservation** –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —Ä–µ–∞–ª–ª–æ–∫–∞—Ü–∏–π

---

## üìñ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–µ—Ä–µ–≤–∞

–í—Å—Ç–∞–≤–∏–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ: `7, 3, 18, 10, 22, 8, 11, 26`

#### –®–∞–≥ 1: –í—Å—Ç–∞–≤–∫–∞ 7
```
    [7B] ‚Üê –ö–æ—Ä–µ–Ω—å –≤—Å–µ–≥–¥–∞ —á–µ—Ä–Ω—ã–π
```

#### –®–∞–≥ 2: –í—Å—Ç–∞–≤–∫–∞ 3  
```
    [7B]
   /
 [3R] ‚Üê –ù–æ–≤—ã–π —É–∑–µ–ª –∫—Ä–∞—Å–Ω—ã–π
```

#### –®–∞–≥ 3: –í—Å—Ç–∞–≤–∫–∞ 18
```
    [7B]
   /   \
 [3R] [18R]
```

#### –®–∞–≥ 4: –í—Å—Ç–∞–≤–∫–∞ 10
```
      [7B]
     /   \
   [3R]  [18R]
          /
       [10R]
```
‚ö†Ô∏è **–ù–∞—Ä—É—à–µ–Ω–∏–µ**: 18R ‚Üí 10R (–¥–≤–∞ –∫—Ä–∞—Å–Ω—ã—Ö –ø–æ–¥—Ä—è–¥)

**–ü—Ä–∏–º–µ–Ω—è–µ–º insert_fixup**:
- –î—è–¥—è (3) –∫—Ä–∞—Å–Ω—ã–π ‚Üí **–°–ª—É—á–∞–π 1**
- –ü–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ–º: 3‚ÜíB, 18‚ÜíB, 7‚ÜíR

```
      [7R]
     /   \
   [3B]  [18B]
          /
       [10R]
```

–ö–æ—Ä–µ–Ω—å –∫—Ä–∞—Å–Ω—ã–π ‚Üí –¥–µ–ª–∞–µ–º —á–µ—Ä–Ω—ã–º:
```
      [7B]
     /   \
   [3B]  [18B]
          /
       [10R]
```

#### –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤—Å—Ç–∞–≤–∫—É...

–ò—Ç–æ–≥–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –≤—Å—Ç–∞–≤–æ–∫:
```
        [7B]
       /    \
    [3B]    [18R]
           /     \
       [10B]    [22B]
        / \       \
     [8R] [11R]  [26R]
```

### –ü—Ä–∏–º–µ—Ä 2: –£–¥–∞–ª–µ–Ω–∏–µ —É–∑–ª–∞

–£–¥–∞–ª–∏–º —É–∑–µ–ª 18 –∏–∑ –ø–æ–ª—É—á–∏–≤—à–µ–≥–æ—Å—è –¥–µ—Ä–µ–≤–∞:

#### –î–æ —É–¥–∞–ª–µ–Ω–∏—è:
```
        [7B]
       /    \
    [3B]    [18R] ‚Üê –£–¥–∞–ª—è–µ–º
           /     \
       [10B]    [22B]
        / \       \
     [8R] [11R]  [26R]
```

18 –∏–º–µ–µ—Ç –¥–≤—É—Ö –¥–µ—Ç–µ–π ‚Üí –∑–∞–º–µ–Ω—è–µ–º –ø—Ä–µ–µ–º–Ω–∏–∫–æ–º (22):

#### –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è:
```
        [7B]
       /    \
    [3B]    [22R] ‚Üê –ó–∞–º–µ–Ω–∏–ª–∏ 18 –Ω–∞ 22
           /     \
       [10B]    [26R]
        / \       
     [8R] [11R]  
```

–ü–æ—Å–∫–æ–ª—å–∫—É —É–¥–∞–ª–∏–ª–∏ –∫—Ä–∞—Å–Ω—ã–π —É–∑–µ–ª (18), —Å–≤–æ–π—Å—Ç–≤–∞ –¥–µ—Ä–µ–≤–∞ –Ω–µ –Ω–∞—Ä—É—à–µ–Ω—ã.

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–∏—Å–∫ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

–î–ª—è –¥–µ—Ä–µ–≤–∞ –≤—ã—à–µ –Ω–∞–π–¥–µ–º `equal_range(10)`:

1. `lower_bound(10)` ‚Üí –∏—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞ 10
2. `upper_bound(10)` ‚Üí –∏—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞ 11
3. –î–∏–∞–ø–∞–∑–æ–Ω: `[it_10, it_11)` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —É–∑–µ–ª 10

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã—Ö –¥–µ—Ä–µ–≤—å–µ–≤:

‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: O(log n) –¥–ª—è –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  
‚úÖ **–£–º–µ—Ä–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏**: –ú–µ–Ω—å—à–µ –≤—Ä–∞—â–µ–Ω–∏–π, —á–µ–º –≤ AVL  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã  
‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –ü–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á  
‚úÖ **–î–æ–∫–∞–∑–∞–Ω–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö  

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:

- **C++ STL**: `std::map`, `std::set`, `std::multimap`, `std::multiset`
- **Java**: `TreeMap`, `TreeSet`
- **.NET**: `SortedDictionary<K,V>`, `SortedSet<T>`
- **Linux —è–¥—Ä–æ**: Completely Fair Scheduler (CFS)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã B-tree –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã—Ö –¥–µ—Ä–µ–≤—å–µ–≤

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

‚úÖ –ù—É–∂–Ω—ã **—á–∞—Å—Ç—ã–µ –≤—Å—Ç–∞–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è** —Å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞  
‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è **—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** O(log n)  
‚úÖ –í–∞–∂–Ω–∞ **–ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å AVL  
‚úÖ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã **–∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã** –¥–ª—è –æ–±—Ö–æ–¥–∞ –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ  

### –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

‚ùå –î–∞–Ω–Ω—ã–µ **—Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è—é—Ç—Å—è** ‚Äî –ª—É—á—à–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤  
‚ùå –ù—É–∂–µ–Ω **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** ‚Äî —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ AVL –∏–ª–∏ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã  
‚ùå –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å **–±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ–¥–æ–π–¥—É—Ç B-–¥–µ—Ä–µ–≤—å—è  
‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è **–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** ‚Äî overhead –Ω–∞ —Ü–≤–µ—Ç–∞ –∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏  

---

### üí° –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç

–ö—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è ‚Äî —ç—Ç–æ **–∑–æ–ª–æ—Ç–∞—è —Å–µ—Ä–µ–¥–∏–Ω–∞** –≤ –º–∏—Ä–µ —Å–∞–º–æ–±–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–∏—Ö—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –æ—Ç–ª–∏—á–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –ø—Ä–æ—Å—Ç–æ—Ç–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.

**–£–¥–∞—á–∏ –≤ –∏–∑—É—á–µ–Ω–∏–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤! üöÄ**

---

> üìù **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –≤ —Ñ–∞–π–ª–∞—Ö `src/source/s21_binary_tree.h` –∏ `src/source/s21_binary_tree.cpp` –ø—Ä–æ–µ–∫—Ç–∞ s21_containers.